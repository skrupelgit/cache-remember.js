{"version":3,"sources":["../node_modules/localit/index.js","index.js"],"names":["CacheRemember","key","time","handler","result","store","Localit","setDomain","get","set","CacheAutoUpdate","promise","Promise","resolve"],"mappings":"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","file":"main.js","sourceRoot":"src","sourcesContent":["(function () {var b={};function d(e){return(d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function c(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.domain,a=void 0===r?\"\":r,o=t.type,n=void 0===o?\"localStorage\":o;f(this,e),this.store=\"localStorage\"==n?localStorage:sessionStorage,this.DOMAIN=a?\"\".concat(a,\"_\"):\"\",this.EXPIRE=\"_expiration_date\"}return g(e,[{key:\"set\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return console.error(\"Localit: provide a key to store a value\");\"object\"==d(t)&&(t=JSON.stringify(t)),this.store.setItem(this.getFullKey(e),t),r&&this.setExpiration(e,r)}},{key:\"setExpiration\",value:function(e,t){if(![\"h\",\"d\",\"m\",\"s\"].some(function(e){return t.includes(e)}))return console.warn(\"Localit: provide a valid expiration time format (e.g. '20h', '160s', '15d'). Your expiration date hasn't been saved.\");var r=new Date,a=null;t.includes(\"s\")&&(a=parseInt(t.replace(\"s\",\"\")),r.setSeconds(r.getSeconds()+a)),t.includes(\"m\")&&(a=parseInt(t.replace(\"m\",\"\")),r.setMinutes(r.getMinutes()+a)),t.includes(\"h\")&&(a=parseInt(t.replace(\"h\",\"\")),r.setHours(r.getHours()+a)),t.includes(\"d\")&&(a=parseInt(t.replace(\"d\",\"\")),r.setDate(r.getDate()+a)),this.store.setItem(\"\".concat(this.getFullKey(e)).concat(this.EXPIRE),JSON.stringify(r))}},{key:\"get\",value:function(e){if(this.hasExpirationDate(e)&&this.hasExpired(e))return this.remove(e),null;try{return JSON.parse(this.store.getItem(this.getFullKey(e)))}catch(t){return this.store.getItem(this.getFullKey(e))}}},{key:\"remove\",value:function(e){this.store.removeItem(this.getFullKey(e)),this.store.removeItem(\"\".concat(this.getFullKey(e)).concat(this.EXPIRE))}},{key:\"setDomain\",value:function(e){this.DOMAIN=\"\".concat(e,\"_\")}},{key:\"clearDomain\",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DOMAIN,t=0,r=Object.keys(localStorage);t<r.length;t++){var a=r[t];a.includes(e)&&this.store.removeItem(a)}}},{key:\"hasExpirationDate\",value:function(e){return null!==this.store.getItem(\"\".concat(this.getFullKey(e)).concat(this.EXPIRE))}},{key:\"hasExpired\",value:function(e){var t=JSON.parse(this.store.getItem(\"\".concat(this.getFullKey(e)).concat(this.EXPIRE)));return new Date>new Date(t)}},{key:\"getFullKey\",value:function(e){return\"\".concat(this.DOMAIN).concat(e)}},{key:\"bust\",value:function(){this.store.clear()}}]),e}();b.Localit=h;if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=b}else if(typeof define===\"function\"&&define.amd){define(function(){return b})}})();","import {Localit} from \"localit\";\r\n\r\n const CacheRemember = async (key, time, handler) => {\r\n\r\n    let store = new Localit();\r\n    store.setDomain('cache-remember')\r\n    let result = store.get(key)\r\n    if (result) {\r\n        return result;\r\n    }\r\n    if (typeof handler === \"function\") {\r\n        result = await handler()\r\n    } else {\r\n        result = await handler\r\n    }\r\n    store.set(key, result, `${time}s`)\r\n\r\n    return result;\r\n\r\n}\r\n const CacheAutoUpdate = (key, handler) => {\r\n\r\n    let store = new Localit();\r\n    let promise;\r\n    store.setDomain('cache-autoupdate')\r\n    let result = store.get(key)\r\n    if (typeof handler === \"function\") {\r\n        promise = new Promise(async (resolve) => {\r\n            let result = await handler()\r\n            store.set(key, result)\r\n            resolve(result)\r\n        })\r\n    } else {\r\n        promise = new Promise(async (resolve) => {\r\n            let result = await handler\r\n            store.set(key, result)\r\n            resolve(result)\r\n        })\r\n    }\r\n    return result ?? promise\r\n\r\n}\r\nexport {CacheRemember, CacheAutoUpdate}"]}