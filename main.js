(function () {var b={};function h(e,r,t,n,a,o,c){try{var u=e[o](c),s=u.value}catch(i){return void t(i)}u.done?r(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var o=e.apply(r,t);function c(e){h(o,n,a,c,u,"next",e)}function u(e){h(o,n,a,c,u,"throw",e)}c(void 0)})}}var f,g={};!function(){var e={};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.domain,o=void 0===n?"":n,r=t.type,i=void 0===r?"localStorage":r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.store="localStorage"==i?localStorage:sessionStorage,this.DOMAIN=o?"".concat(o,"_"):"",this.EXPIRE="_expiration_date"}return function(e,t,o){t&&n(e.prototype,t),o&&n(e,o)}(e,[{key:"set",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return console.error("Localit: provide a key to store a value");"object"==t(n)&&(n=JSON.stringify(n)),this.store.setItem(this.getFullKey(e),n),o&&this.setExpiration(e,o)}},{key:"setExpiration",value:function(e,t){if(!["h","d","m","s"].some(function(e){return t.includes(e)}))return console.warn("Localit: provide a valid expiration time format (e.g. '20h', '160s', '15d'). Your expiration date hasn't been saved.");var n=new Date,o=null;t.includes("s")&&(o=parseInt(t.replace("s","")),n.setSeconds(n.getSeconds()+o)),t.includes("m")&&(o=parseInt(t.replace("m","")),n.setMinutes(n.getMinutes()+o)),t.includes("h")&&(o=parseInt(t.replace("h","")),n.setHours(n.getHours()+o)),t.includes("d")&&(o=parseInt(t.replace("d","")),n.setDate(n.getDate()+o)),this.store.setItem("".concat(this.getFullKey(e)).concat(this.EXPIRE),JSON.stringify(n))}},{key:"get",value:function(e){if(this.hasExpirationDate(e)&&this.hasExpired(e))return this.remove(e),null;try{return JSON.parse(this.store.getItem(this.getFullKey(e)))}catch(t){return this.store.getItem(this.getFullKey(e))}}},{key:"remove",value:function(e){this.store.removeItem(this.getFullKey(e)),this.store.removeItem("".concat(this.getFullKey(e)).concat(this.EXPIRE))}},{key:"setDomain",value:function(e){this.DOMAIN="".concat(e,"_")}},{key:"clearDomain",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DOMAIN,t=0,n=Object.keys(localStorage);t<n.length;t++){var o=n[t];o.includes(e)&&this.store.removeItem(o)}}},{key:"hasExpirationDate",value:function(e){return null!==this.store.getItem("".concat(this.getFullKey(e)).concat(this.EXPIRE))}},{key:"hasExpired",value:function(e){var t=JSON.parse(this.store.getItem("".concat(this.getFullKey(e)).concat(this.EXPIRE)));return new Date>new Date(t)}},{key:"getFullKey",value:function(e){return"".concat(this.DOMAIN).concat(e)}},{key:"bust",value:function(){this.store.clear()}}]),e}();e.Localit=o,"object"==typeof g?g=e:"function"==typeof f&&f.amd&&f(function(){return e})}();var j=function(){var e=d(regeneratorRuntime.mark(function e(r,t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new g.Localit).setDomain("cache-remember"),!(o=a.get(r))){e.next=5;break}return e.abrupt("return",o);case 5:if("function"!=typeof n){e.next=11;break}return e.next=8,n();case 8:o=e.sent,e.next=14;break;case 11:return e.next=13,n;case 13:o=e.sent;case 14:return a.set(r,o,"".concat(t,"s")),e.abrupt("return",o);case 16:case"end":return e.stop();}},e)}));return function(r,t,n){return e.apply(this,arguments)}}(),k=function(e,r){var t,n=new g.Localit;n.setDomain("cache-autoupdate");var a=n.get(e);return t="function"==typeof r?new Promise(function(){var t=d(regeneratorRuntime.mark(function t(a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:o=t.sent,n.set(e,o),a(o);case 5:case"end":return t.stop();}},t)}));return function(e){return t.apply(this,arguments)}}()):new Promise(function(){var t=d(regeneratorRuntime.mark(function t(a){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:o=t.sent,n.set(e,o),a(o);case 5:case"end":return t.stop();}},t)}));return function(e){return t.apply(this,arguments)}}()),null!=a?a:t};b.CacheAutoUpdate=k,b.CacheRemember=j;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b}else if(typeof define==="function"&&define.amd){define(function(){return b})}})();